<!DOCTYPE html>
  <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
    <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
      <meta name="author" content="Xu Kuang" />
        <title>data.table的包的简单介绍 | Xu Kuang</title>
        <link rel="shortcut icon" href="/favicon.ico">
          <link href="http://xukuang.github.io/blog/feed/" rel="alternate" title="Xu Kuang" type="application/atom+xml" />
            <link rel="stylesheet" href="/media/css/style.css">
              <link rel="stylesheet" href="/media/css/highlight.css">
                <script type="text/javascript" src="/media/js/jquery-1.7.1.min.js"></script>
                  <!--highlight.js Start-->
                  <link rel="stylesheet" title="Default" href="/media/js/styles/tomorrow-night-blue.css">
                    <script type="text/javascript" src="/media/js/highlight.pack.js"></script>
                      <script>
                      hljs.configure({tabReplace: '    '});
                    hljs.initHighlightingOnLoad();
                    </script>
                      <!--highlight.js End-->
                      <!--mathjax start-->
                      <script type="text/javascript"
                      src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
                        </script>
                        
                        <!--mathjax end-->
                        </head>
                        <body>
                        <div id="container">
                          <div id="main" role="main">
                            <header>
                            <h1>data.table的包的简单介绍</h1>
                            </header>
                            <nav>
                            <!-- Sidebar -->
                            <h5 id="logo" style="text-align:center;">
                              <a href="http://xukuang.github.io/">HOME</a></h5>
                                <span><a title="blog" class="" href="http://xukuang.github.io/blog/">BLOG</a></span>
                                  <span><a title="about" class="" href="http://xukuang.github.io/blog/about/">ABOUT</a></span>
                                    <span><a title="categories" class="" href="http://xukuang.github.io/blog/categories/">CATEGORIES</a></span>
                                      <span><a title="vitae" class="" href="http://xukuang.github.io/blog/vitae/">VITAE</a></span>
                                        <span><a title="tags" class="" href="http://xukuang.github.io/blog/tags/">TAGS</a></span>
                                          <span><a title="links" class="" href="http://xukuang.github.io/blog/links/">LINKS</a></span>
                                            <span><a title="subscribe by RSS" class="" href="http://xukuang.github.io/blog/feed/">SUBSCRIBE</a></span>
                                              </nav>
								<ul class="entry-right-list">
          <li class="date">获取每日の能量源</li>
          <li class="qr">
            <img src="/bog/images/beta.png" width="148" height="148" alt="ATP" style="margin-left: -10px;">
          </li>
        </ul>
                                              <article class="content">
                                              <section class="post">
<p>相比dplyr包，data.table包能够更大程度地提高数据的处理速度，这里就简单介绍一下data.tale包的使用方法。</p>

<h2 id="section">数据的读取</h2>
<p>data.table包中数据读取的函数是fread()。</p>

<h2 id="datatable-">data.table 的创建</h2>

<div class="highlighter-rouge"><pre class="highlight"><code>library(data.table)
DT = data.table(x=rep(c("a","b","c"),each=3), y=c(1,3,6), v=1:9)
DT
	#    x y v
	# 1: a 1 1
	# 2: a 3 2
	# 3: a 6 3
	# 4: b 1 4
	# 5: b 3 5
	# 6: b 6 6
	# 7: c 1 7
	# 8: c 3 8
	# 9: c 6 9
</code></pre>
</div>
<!--more-->

<h2 id="section-1">基础操作</h2>

<h3 id="section-2">行提取</h3>
<p>行提取分为单行提取和多行提取。</p>

<h4 id="section-3">单行提取</h4>

<div class="highlighter-rouge"><pre class="highlight"><code>DT[2]                      # 2nd row
	#    x y v
	# 1: a 3 2
DT[2,]                     # same
	#    x y v
	# 1: a 3 2
</code></pre>
</div>
<p>这里DT[2]和DT[2,]是完全相同的，这里的『,』只是说明还有其他参数可设置，而其他参数按默认值进行计算。下文所有这样的最后一个『,』都不再写出来。</p>

<h4 id="section-4">多行提取</h4>

<ul>
  <li>数字提取</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>DT[1:2]
	#    x y v
	# 1: a 1 1
	# 2: a 3 2
DT[c(2,5)]
	#   x y v
	#1: a 3 2
	#2: b 3 5
</code></pre>
</div>

<ul>
  <li>逻辑提取</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>DT[c(FALSE,TRUE)]          # even rows (usual recycling)
	#    x y v
	# 1: a 3 2
	# 2: b 1 4
	# 3: b 6 6
	# 4: c 3 8
</code></pre>
</div>

<p>此时,c(FALSE,TRUE)会自己重复匹配成与DT的行数相同的向量</p>

<h3 id="section-5">列提取</h3>
<p>与行提取相同，列的提取也包含单列提取和多列提取。</p>

<h4 id="section-6">单列提取</h4>

<ul>
  <li>数字提取</li>
</ul>

<p>数字提取时，一定要把wth参数设置为FALSE。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>DT[,2,with=FALSE]          # 2nd column
	#    y
	# 1: 1
	# 2: 3
	# 3: 6
	# 4: 1
	# 5: 3
	# 6: 6
	# 7: 1
	# 8: 3
	# 9: 6
</code></pre>
</div>

<ul>
  <li>列名提取</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>DT[,list(v)]               # v column (as data.table
	#    v
	# 1: 1
	# 2: 2
	# 3: 3
	# 4: 4
	# 5: 5
	# 6: 6
	# 7: 7
	# 8: 8
	# 9: 9
</code></pre>
</div>

<h3 id="section-7">列名的修改</h3>
<p>列名的修改可以使用setnames()函数，这个函数好像比对data.frame类型数据名更改的names()和colnames()函数也要快一些。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>dt = data.table(a=1:2,b=3:4,c=5:6) # compare to data.table
try(tracemem(dt))                  # by reference, no deep or shallow copies
setnames(dt,"b","B")               # by name, no match() needed (warning if "b" is missing)
setnames(dt,3,"C")                 # by position with warning if 3 &gt; ncol(dt)
setnames(dt,2:3,c("D","E"))        # multiple
setnames(dt,c("a","E"),c("A","F")) # multiple by name (warning if either "a" or "E" is missing)
setnames(dt,c("X","Y","Z"))        # replace all (length of names must be == ncol(DT))  
</code></pre>
</div>

<h4 id="section-8">多列提取</h4>

<ul>
  <li>数字提取</li>
</ul>

<p>如同上面对按数字对单列的提取，对多列提取也要设置with参数为FALSE。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>DT[,2:3,with=FALSE]
	#    y v
	# 1: 1 1
	# 2: 3 2
	# 3: 6 3
	# 4: 1 4
	# 5: 3 5
	# 6: 6 6
	# 7: 1 7
	# 8: 3 8
	# 9: 6 9
DT[,c(1,3),with=FALSE] 
	#    x v
	# 1: a 1
	# 2: a 2
	# 3: a 3
	# 4: b 4
	# 5: b 5
	# 6: b 6
	# 7: c 7
	# 8: c 8
	# 9: c 9      
</code></pre>
</div>

<ul>
  <li>按列名提取</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>DT[,list(y, v)]
	#    y v
	# 1: 1 1
	# 2: 3 2
	# 3: 6 3
	# 4: 1 4
	# 5: 3 5
	# 6: 6 6
	# 7: 1 7
	# 8: 3 8
	# 9: 6 9
</code></pre>
</div>

<p>如果按列名提取时，不使用列表，仍然能对列进行提取，只是结果以向量的形式输出。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>DT[,v]                     # v column (as vector)
	# [1] 1 2 3 4 5 6 7 8 9
DT[,c(v)]                  # same
	# [1] 1 2 3 4 5 6 7 8 9   
DT[, c(y, v)]
	# [1] 1 3 6 1 3 6 1 3 6 1 2 3 4 5 6 7 8 9
</code></pre>
</div>

<h3 id="section-9">列的添加与删除</h3>

<h4 id="section-10">列的添加</h4>

<ul>
  <li>单列添加</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>DT
	#    x y v
	# 1: a 1 1
	# 2: a 3 2
	# 3: a 6 3
	# 4: b 1 4
	# 5: b 3 5
	# 6: b 6 6
	# 7: c 1 7
	# 8: c 3 8
	# 9: c 6 9
DT[, a := 'k']
DT
	#    x y v a
	# 1: a 1 1 k
	# 2: a 3 2 k
	# 3: a 6 3 k
	# 4: b 1 4 k
	# 5: b 3 5 k
	# 6: b 6 6 k
	# 7: c 1 7 k
	# 8: c 3 8 k
	# 9: c 6 9 k
DT[,c:=8]        # add a numeric column, 8 for all rows
DT
	#    x y v a c
	# 1: a 1 1 k 8
	# 2: a 3 2 k 8
	# 3: a 6 3 k 8
	# 4: b 1 4 k 8
	# 5: b 3 5 k 8
	# 6: b 6 6 k 8
	# 7: c 1 7 k 8
	# 8: c 3 8 k 8
	# 9: c 6 9 k 8 
DT[,d:=9L]       # add an integer column, 9L for all rows
DT[2,d:=10L]     # subassign by reference to column d
DT
	#    x y v a c  d
	# 1: a 1 1 k 8  9
	# 2: a 3 2 k 8 10
	# 3: a 6 3 k 8  9
	# 4: b 1 4 k 8  9
	# 5: b 3 5 k 8  9
	# 6: b 6 6 k 8  9
	# 7: c 1 7 k 8  9
	# 8: c 3 8 k 8  9
	# 9: c 6 9 k 8  9
DT[, e := d + 2]
DT
	#    x y v a c  d  e
	# 1: a 1 1 k 8  9 11
	# 2: a 3 2 k 8 10 12
	# 3: a 6 3 k 8  9 11
	# 4: b 1 4 k 8  9 11
	# 5: b 3 5 k 8  9 11
	# 6: b 6 6 k 8  9 11
	# 7: c 1 7 k 8  9 11
	# 8: c 3 8 k 8  9 11
	# 9: c 6 9 k 8  9 11
</code></pre>
</div>
<p>如果添加的列名，数据中已经包含则是对这一列数据的修改。</p>

<ul>
  <li>多列的添加</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>DT[, c('f', 'g') := list( d + 1, c)]
DT[, ':='( f =  d + 1, g = c)]          # same
DT
	#    x y v a c  d  e  f g
	# 1: a 1 1 k 8  9 11 10 8
	# 2: a 3 2 k 8 10 12 11 8
	# 3: a 6 3 k 8  9 11 10 8
	# 4: b 1 4 k 8  9 11 10 8
	# 5: b 3 5 k 8  9 11 10 8
	# 6: b 6 6 k 8  9 11 10 8
	# 7: c 1 7 k 8  9 11 10 8
	# 8: c 3 8 k 8  9 11 10 8
	# 9: c 6 9 k 8  9 11 10 8
</code></pre>
</div>
<p>此处，需要注意的是新创建的列只能依照原有数据列，而不能依照新创建的列。例如这个例子中，g = c是可以运行，而g = f则会提示错误。</p>

<h4 id="section-11">列的删除</h4>

<div class="highlighter-rouge"><pre class="highlight"><code>DT[,c:=NULL]     # remove column c
DT
	#    x y v a  d  e  f g
	# 1: a 1 1 k  9 11 10 8
	# 2: a 3 2 k 10 12 11 8
	# 3: a 6 3 k  9 11 10 8
	# 4: b 1 4 k  9 11 10 8
	# 5: b 3 5 k  9 11 10 8
	# 6: b 6 6 k  9 11 10 8
	# 7: c 1 7 k  9 11 10 8
	# 8: c 3 8 k  9 11 10 8
	# 9: c 6 9 k  9 11 10 8
DT[, c('d', 'e', 'f', 'g'):=NULL]     
DT
	#    x y v a
	# 1: a 1 1 k
	# 2: a 3 2 k
	# 3: a 6 3 k
	# 4: b 1 4 k
	# 5: b 3 5 k
	# 6: b 6 6 k
	# 7: c 1 7 k
	# 8: c 3 8 k
	# 9: c 6 9 k
</code></pre>
</div>

<h2 id="section-12">列指标的简单操作</h2>
<p>简单操作主要包括求和、平均值、方差和标准差等。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>DT[2:3,sum(v)]             # sum(v) over rows 2 and 3
# [1] 5
DT[2:3,mean(v)]             # sum(v) over rows 2 and 3
# [1] 2.5
</code></pre>
</div>

<h2 id="key">索引key</h2>

<h3 id="section-13">查看和创建索引</h3>
<p>索引是对列而言的，索引创建后，数据将自动按索引值进行重新排序，所以每个数据最多只能有一个索引，但是索引可以由多列组成，这些列可以是数字、因子、字符串或其他格式。</p>

<h4 id="section-14">单列索引的创建</h4>

<div class="highlighter-rouge"><pre class="highlight"><code>
## methdod first
key(DT)                    # key
	# NULL 
setkey(DT,x)               # set a 1-column key. No quotes, for convenience.
key(DT)
[1] "x"
DT
	#    x y v a
	# 1: a 1 1 k
	# 2: a 3 2 k
	# 3: a 6 3 k
	# 4: b 1 4 k
	# 5: b 3 5 k
	# 6: b 6 6 k
	# 7: c 1 7 k
	# 8: c 3 8 k
	# 9: c 6 9 k

## method second
setkeyv(DT,"y")            # same (v in setkeyv stands for vector)
key(DT)
	# [1] "y"
</code></pre>
</div>
<p>一旦对数据进行新的索引，原有的索引将消失。</p>

<h4 id="section-15">多列索引的创建</h4>

<div class="highlighter-rouge"><pre class="highlight"><code>## methdod first                    # key 
setkey(DT,x,v)               # set a 1-column key. No quotes, for convenience.
key(DT)
	# [1] "x" "v"
DT
	#    x y v a
	# 1: a 1 1 k
	# 2: a 3 2 k
	# 3: a 6 3 k
	# 4: b 1 4 k
	# 5: b 3 5 k
	# 6: b 6 6 k
	# 7: c 1 7 k
	# 8: c 3 8 k
	# 9: c 6 9 k


## method second
setkeyv(DT,c("x", "y"))           # same (v in setkeyv stands for vector)
key(DT)
	# [1] "x" "v"
DT
	#    x y v a
	# 1: a 1 1 k
	# 2: a 3 2 k
	# 3: a 6 3 k
	# 4: b 1 4 k
	# 5: b 3 5 k
	# 6: b 6 6 k
	# 7: c 1 7 k
	# 8: c 3 8 k
	# 9: c 6 9 k
</code></pre>
</div>

<h3 id="section-16">通过索引进行数据的提取</h3>
<p>按照索引对数据提取，可以加快提取数据的速度。</p>

<h4 id="section-17">单索引</h4>
<p>正向提取</p>

<div class="highlighter-rouge"><pre class="highlight"><code>setkey(DT, x)
DT["a"]                    # binary search (fast)
	#    x y v a
	# 1: a 1 1 k
	# 2: a 3 2 k
	# 3: a 6 3 k
DT[.(x=="a")]                 # same; i.e. binary search (fast)
	#    x y v a
	# 1: a 1 1 k
	# 2: a 3 2 k
	# 3: a 6 3 k
DT[x=="a"]                 # same; i.e. binary search (fast)
	#    x y v a
	# 1: a 1 1 k
	# 2: a 3 2 k
	# 3: a 6 3 k
</code></pre>
</div>

<ul>
  <li>反向提取</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>DT[!.("a")]                # not join
	#    x y v a
	# 1: b 1 4 k
	# 2: b 3 5 k
	# 3: b 6 6 k
	# 4: c 1 7 k
	# 5: c 3 8 k
	# 6: c 6 9 k
DT[!"a"]                   # same
	#    x y v a
	# 1: b 1 4 k
	# 2: b 3 5 k
	# 3: b 6 6 k
	# 4: c 1 7 k
	# 5: c 3 8 k
	# 6: c 6 9 k
DT[!2:4]                   # all rows other than 2:4
	#    x y v a
	# 1: a 1 1 k
	# 2: b 3 5 k
	# 3: b 6 6 k
	# 4: c 1 7 k
	# 5: c 3 8 k
	# 6: c 6 9 k

</code></pre>
</div>

<h4 id="section-18">多索引</h4>

<ul>
  <li>正向提取</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>setkey(DT, x, y)
# Mehtod First
DT["a"]                    # join to 1st column of key
	#    x y v a
	# 1: a 1 1 k
	# 2: a 3 2 k
	# 3: a 6 3 k
DT[.("a")]                 # same, .() is an alias for list()
	#    x y v a
	# 1: a 1 1 k
	# 2: a 3 2 k
	# 3: a 6 3 k
DT[.("a",3)]               # join to 2 columns
    #    x y v a
	# 1: a 3 2 k
DT[.("a",3:6)]             # join 4 rows (2 missing)
	#    x y  v  a
	# 1: a 3  2  k
	# 2: a 4 NA NA
	# 3: a 5 NA NA
	# 4: a 6  3  k
DT[.("a",3:6),nomatch=0]   # remove missing
	#    x y v a
	# 1: a 3 2 k
	# 2: a 6 3 k
DT[.("a",3:6),roll=TRUE]   # rolling join (locf)
	#    x y v a
	# 1: a 3 2 k
	# 2: a 4 2 k
	# 3: a 5 2 k
	# 4: a 6 3 k

## Method Second
DT[J('a')]
	#    x y v a
	# 1: a 1 1 k
	# 2: a 3 2 k
	# 3: a 6 3 k
DT[J("a",3)]               # binary search (fast)
	#    x y v a
	# 1: a 3 2 k
DT[J("a",3:6)]              # same; i.e. binary search (fast)
	#    x y  v  a
	# 1: a 3  2  k
	# 2: a 4 NA NA
	# 3: a 5 NA NA
	# 4: a 6  3  k
DT[J("a",3:6), nomatch = 0]
	#    x y v a
	# 1: a 3 2 k
	# 2: a 6 3 k
DT[J("a",3:6), roll = T]
	#    x y v a
	# 1: a 3 2 k
	# 2: a 4 2 k
	# 3: a 5 2 k
	# 4: a 6 3 k


## Method Third
DT[list("a")]
	#    x y v a
	# 1: a 1 1 k
	# 2: a 3 2 k
	# 3: a 6 3 k
DT[list("a",3)]
    #    x y v a
	# 1: a 3 2 k
DT[list("a", 3:6)]
	#    x y  v  a
	# 1: a 3  2  k
	# 2: a 4 NA NA
	# 3: a 5 NA NA
	# 4: a 6  3  k
DT[list("a", 3:6), nomatch = 0]
	#    x y v a
	# 1: a 3 2 k
	# 2: a 6 3 k
DT[list("a", 3:6), roll = T]
	#    x y v a
	# 1: a 3 2 k
	# 2: a 4 2 k
	# 3: a 5 2 k
	# 4: a 6 3 k
</code></pre>
</div>

<ul>
  <li>反向提取</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>DT[x!="b" | y!=3]          # not yet optimized, currently vector scans
	#    x y v a
	# 1: a 1 1 k
	# 2: a 3 2 k
	# 3: a 6 3 k
	# 4: b 1 4 k
	# 5: b 6 6 k
	# 6: c 1 7 k
	# 7: c 3 8 k
	# 8: c 6 9 k
DT[!.("b",3)]              # same result but much faster
	#    x y v a
	# 1: a 1 1 k
	# 2: a 3 2 k
	# 3: a 6 3 k
	# 4: b 1 4 k
	# 5: b 6 6 k
	# 6: c 1 7 k
	# 7: c 3 8 k
	# 8: c 6 9 k

</code></pre>
</div>

<h2 id="section-19">分类汇总</h2>
<p>分类汇总是指按某列的分类指标进行简单操作，这里借助by参数实现。此外，by参数与索引相互没有影响。</p>

<h3 id="section-20">单指标的分类汇总</h3>

<ul>
  <li>默认汇总名称</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>DT[,sum(v),by=x]
	#    x V1
	# 1: a  6
	# 2: b 15
	# 3: c 24           
DT[,sum(v),by=y] 
	#    y V1
	# 1: 1 12
	# 2: 3 15
	# 3: 6 18          
</code></pre>
</div>
<ul>
  <li>
    <p>自定义汇总名称
<code class="highlighter-rouge">
DT[,list(sum.v.x = sum(v)),by=x]
  #    x sum.v.x
  # 1: a       6
  # 2: b      15
  # 3: c      24           
DT[,list(sum.v.y = sum(v)),by=y] 
  #    y sum.v.y
  # 1: 1      12
  # 2: 3      15
  # 3: 6      18 
DT[,sum.v.y := sum(v) ,by=y]
  #    x y v a sum.v.y
  # 1: a 1 1 k      12
  # 2: a 3 2 k      15
  # 3: a 6 3 k      18
  # 4: b 1 4 k      12
  # 5: b 3 5 k      15
  # 6: b 6 6 k      18
  # 7: c 1 7 k      12
  # 8: c 3 8 k      15
  # 9: c 6 9 k      18 	
</code></p>
  </li>
  <li>
    <p>汇总结果与原始数据进行匹配</p>
  </li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>DT[,sum.v.y := sum(v) ,by=y]
	#    x y v a sum.v.y
	# 1: a 1 1 k      12
	# 2: a 3 2 k      15
	# 3: a 6 3 k      18
	# 4: b 1 4 k      12
	# 5: b 3 5 k      15
	# 6: b 6 6 k      18
	# 7: c 1 7 k      12
	# 8: c 3 8 k      15
	# 9: c 6 9 k      18
</code></pre>
</div>

<h3 id="section-21">多指标的多个分类汇总</h3>

<ul>
  <li>默认汇总名称</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>DT[,list(mean(v),sum(v)),by=list(x,y)]   # keyed by
	#    x y V1 V2
	# 1: a 1  1  1
	# 2: a 3  2  2
	# 3: a 6  3  3
	# 4: b 1  4  4
	# 5: b 3  5  5
	# 6: b 6  6  6
	# 7: c 1  7  7
	# 8: c 3  8  8
	# 9: c 6  9  9
</code></pre>
</div>

<ul>
  <li>自定义汇总名称</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>DT[,list(mean.v = mean(v),sum.v = sum(v)),by=list(x,y)]   # keyed by
	#   x y mean.v sum.v
	#1: a 1      1     1
	#2: a 3      2     2
	#3: a 6      3     3
	#4: b 1      4     4
	#5: b 3      5     5
	#6: b 6      6     6
	#7: c 1      7     7
	#8: c 3      8     8
	#9: c 6      9     9
</code></pre>
</div>

<ul>
  <li>汇总结果与原始数据进行匹配</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>DT[,c("mean.v", "sum.v.y") := list(mean(v),sum(v)) ,by=list(x,y)]
	#    x y v a sum.v.y mean.v
	# 1: a 1 1 k       1      1
	# 2: a 3 2 k       2      2
	# 3: a 6 3 k       3      3
	# 4: b 1 4 k       4      4
	# 5: b 3 5 k       5      5
	# 6: b 6 6 k       6      6
	# 7: c 1 7 k       7      7
	# 8: c 3 8 k       8      8
	# 9: c 6 9 k       9      9

</code></pre>
</div>

<h2 id="datatabledataframe">data.table与data.frame的转化</h2>
<p>data.table格式加快了处理速度，而data.frame则更为基础。两者的转化可以通过data.table(),setDT()和setDT()来实现，其中data.table()和setDT()函数可以将数据从data.frame转化为data.table，setDF()函数可以将数据从data.table转化为data.frame。注意使用data.table(),setDT()和setDT()时，参数本身的数据类型也会发生变化。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>class(DT)
	# [1] "data.table" "data.frame"  
class(setDF(DT))
	# [1] "data.frame"
class(DT)
	# [1] "data.frame"
</code></pre>
</div>
<p>此外，data.table包还可以与基础包中的duplicated()、unique()、subset() 函数结合使用。 不仅如此，data.table包还有一些基础包的替代函数。rbind()升级版的rbindlist()，可以合并列数不同和列位置不同的数据。比dplyr包中arrange()函数更快的setorder()排序函数。</p>

</section>
<section class="meta">



<span>
	<a  href="http://xukuang.github.io/blog/2016/04/data-fomrat/" class="pageNav"  >Previous</a>
	&nbsp;&nbsp;&nbsp;
	<a  href="http://xukuang.github.io/blog/2016/04/dots-in-r/" class="pageNav"  >Next</a>
</span>


<span class="author">
  <a href="http://xukuang.github.io/blog">Xu Kuang</a>
</span>
<span class="time">
  /
  <time datetime="2016-04-13">2016-04-13</time>
</span>
<br />
<span class="license">
  Published under <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">(CC) BY-NC-SA</a>
</span>

<span class="categories">
  in categories
  
  <a href="http://xukuang.github.io/blog/categories/#技术篇" title="技术篇">技术篇</a>&nbsp;
  
</span>


<span class="tags">
  tagged with 
  
  <a href="http://xukuang.github.io/blog/tags/#R" title="R">R</a>&nbsp;
  
  <a href="http://xukuang.github.io/blog/tags/#data.talbe" title="data.talbe">data.talbe</a>&nbsp;
  
</span>

</section>
<div id="disqus_thread"></div>
<script>
/**
* RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
* LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//httpxukuanggithubio.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

<script type="text/javascript">
$(function(){
  $(document).keydown(function(e) {
    if (e.target.nodeName.toUpperCase() != 'BODY') return;
    var url = false;
        if (e.which == 37 || e.which == 74) {  // Left arrow and J
            
        url = 'http://xukuang.github.io/blog/2016/04/data-fomrat/';
        
        }
        else if (e.which == 39 || e.which == 75) {  // Right arrow and K
            
        url = 'http://xukuang.github.io/blog/2016/04/dots-in-r/';
        
        }
        if (url) {
            window.location = url;
        }
  });
})
</script>


                                              </article>
                                                </div>
                                                </div>
                                                <script type="text/javascript">
                                                  var _gaq = _gaq || [];
                                                  _gaq.push(['_setAccount', '']);
                                                  _gaq.push(['_trackPageview']);
                                                  (function() {
                                                    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                                                    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                                                    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                                                  })();
                                                  </script>
                                                    </body>
                                                    </html>
                                                    