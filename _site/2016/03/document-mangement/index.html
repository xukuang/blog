<!DOCTYPE html>
  <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
    <head>
      <meta http-equiv="content-type" content="text/html; charset=utf-8" />
      <meta name="author" content="Xu Kuang" />
      <title>用R进行文件系统管理 | Xu Kuang</title>
      <link rel="shortcut icon" href="/favicon.ico">
      <link href="http://xukuang.github.io/blog/feed/" rel="alternate" title="Xu Kuang" type="application/atom+xml" />
      <link rel="stylesheet" href="/media/css/style.css">
      <link rel="stylesheet" href="/media/css/highlight.css">
      <script type="text/javascript" src="/media/js/jquery-1.7.1.min.js"></script>
      <!--highlight.js Start-->
      <link rel="stylesheet" title="Default" href="/media/js/styles/tomorrow-night-blue.css">
      <script type="text/javascript" src="/media/js/highlight.pack.js"></script>
      <script>
         hljs.configure({tabReplace: '    '});
         hljs.initHighlightingOnLoad();
      </script>
      <!--highlight.js End-->
      <!--mathjax start-->
      <script type="text/javascript"
      src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
      </script>
      <!--mathjax end-->
   </head>
   <script type="text/javascript">
    function setTimeSpan(){
    	var date = new Date();
    	timeSpan.innerText=date.format('yyyy-MM-dd hh:mm:ss');
    }
    
    Date.prototype.format = function(format)
		{
    var o =
    	{
    	    "M+" : this.getMonth()+1, //month
    	    "d+" : this.getDate(),    //day
    	    "h+" : this.getHours(),   //hour
    	    "m+" : this.getMinutes(), //minute
    	    "s+" : this.getSeconds(), //second
    	    "q+" : Math.floor((this.getMonth()+3)/3),  //quarter
    	    "S" : this.getMilliseconds() //millisecond
    	}
    	if(/(y+)/.test(format))
    	format=format.replace(RegExp.$1,(this.getFullYear()+"").substr(4 - RegExp.$1.length));
    	for(var k in o)
    	if(new RegExp("("+ k +")").test(format))
    	format = format.replace(RegExp.$1,RegExp.$1.length==1 ? o[k] : ("00"+ o[k]).substr((""+ o[k]).length));
    	return format;
		}
  </script>
   <body>
     <div id="container">
       <div id="main" role="main">
         <header>
           <h1>用R进行文件系统管理</h1>
         </header>
         <nav>
           <!-- Sidebar -->
           <h5 id="logo" style="text-align:center;">
             <a href="http://xukuang.github.io/">HOME</a>
		   </h5>
           <span><a title="blog" class="" href="http://xukuang.github.io/blog/">BLOG</a></span>
           <span><a title="about" class="" href="http://xukuang.github.io/blog/about/">ABOUT</a></span>
           <span><a title="categories" class="" href="http://xukuang.github.io/blog/categories/">CATEGORIES</a></span>
           <span><a title="vitae" class="" href="http://xukuang.github.io/blog/vitae/">VITAE</a></span>
           <span><a title="tags" class="" href="http://xukuang.github.io/blog/tags/">TAGS</a></span>
           <span><a title="links" class="" href="http://xukuang.github.io/blog/links/">LINKS</a></span>
           <span><a title="subscribe by RSS" class="" href="http://xukuang.github.io/blog/feed/">SUBSCRIBE</a></span>
	       <!--<ul class="entry-right-list">
            <li class="date">获取每日の能量源</li>
            <li class="qr">
              <img src="http://xukuang.github.io/blog/images/beta.png" width="148" height="148" alt="ATP" style="margin-left: -10px;">
            </li>
           </ul>-->
         </nav>
         <article class="content">
           <section class="post">
<p>学习中，已经体会到了R在数据处理方面的厉害，偶然看到张丹的博文<a href="http://blog.fens.me/r-file-folder/">《用R进行文件系统管理》</a>，发现R居然还可以进行文件系统的管理，又一次全新的认识了世界（其实主要是R）。这里基本上是把张丹的文章照搬过来了，只是加了少许自己学习时心得。本文中提到的文件系统管理主要是指文件和目录（即文件夹）的创建、查看、重命名、复制、删除和文件权限处理。</p>

<h2 id="section">文件操作</h2>

<ul>
  <li>创建文件</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code># 创建一个空文件 A.txt
file.create("A.txt")
# 查看当前目录下的子目录和文件
list.files()

# 创建多个空文件 A1.txt，A2.txt，A3.txt
file.create("A1.txt", "A2.txt", "A3.txt")
# 查看当前目录下的子目录和文件
list.files()

# 创建一个有内容的文件 B.txt
cat("文件测试\n", file = "B.txt")
list.files()
</code></pre>
</div>

<ul>
  <li>查看文件</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code># 显示当前目录中的目录和文件

## 下面两句结果相同
list.files() # 建议使用该命令，方便记忆
dir()


## 参数full.names = TRUE，确定文件显示全名

## 参数recursive = TRUE，递归显示，即把目录下的目录和文件都以文件的形式显示
list.files(, full.names = TRUE, recursive = TRUE)

# 检查文件是否存在

## 存在的文件
file.exists("A.txt")

## 不存在的文件
file.exists("readme.txt")

# 判断是否是文件
file_test("-f", "A.txt")
</code></pre>
</div>
<!--more-->

<ul>
  <li>读取文件</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code># 文件A.txt读取
readLines("A.txt")

# 文件B.txt读取
readLines("B.txt")
</code></pre>
</div>

<ul>
  <li>文件重命名</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code># 给文件A.txt重命名为AA.txt
file.rename("A.txt","AA.txt")
list.files()
</code></pre>
</div>

<ul>
  <li>复制文件</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>file.copy("B.txt", "C.txt")
# 查看文件内容
readLines("C.txt")
</code></pre>
</div>

<ul>
  <li>追加文件</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>file.append("A.txt", rep("B.txt", 10))
# 查看文件内容
readLines("A.txt") 
</code></pre>
</div>

<ul>
  <li>删除文件</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code># 新建文件
file.create("tempa1", "tempa2", "tempa3", "tempa4")
list.files()
# 删除文件
file.remove("tempa1", "tempa2", "tempa3", "tempa4")
list.files()
</code></pre>
</div>

<ul>
  <li>文件权限</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code># 查看文件完整信息
file.info("A.txt")

# 查看文件访问权限
# 0表示有相关权限
# 1表示没有相关权限

## 是否存在
file.access("A.txt",0)

## 是否可执行
file.access("A.txt",1)

## 是否可写
file.access("A.txt",2)

## 是否可读
file.access("A.txt",4)

# 文件权限修改

## 查看文件信息
file.info("A.txt")

## 修改文件权限，创建者可读可写可执行，其他人无权限
Sys.chmod("A.txt", mode = "0400", use_umask = TRUE)

## 查看文件信息
file.info("A.txt")
</code></pre>
</div>

<h2 id="section-1">目录操作</h2>

<ul>
  <li>创建目录</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code># 新建一个目录
dir.create("test") # 不能同时创建多个目录
list.dirs()

# 递归创建
dir.create("test/test",recursive = TRUE)
list.dirs()
</code></pre>
</div>

<ul>
  <li>查看目录</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code># 查看当前默认目录的一级目录和文件
list.files() # 同时会显示目录下的文件
dir()

# 查看当前默认目录的子目录

## 默认递归显示各级子目录
list.dirs()

## 只显示一级子目录
list.dirs(recursive= FALSE)

# 通过系统命令查看目录结构
system("tree")

# 检查目录是否存在
# 存在的目录
file.exists(".")
file.exists("./test")

# 不存在的目录
file.exists("./test1")

# 判断是否是目录

## 下面两个语句结果相同
file_test("-d", "./test")
file_test("-d", "test")
</code></pre>
</div>

<ul>
  <li>目录重命名</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code># 查看目录
dir()

# 对test目录重命名
file.rename("test", "test1")

# 查看目录
dir()

# 目录重命名
file.rename("test1", "test")
</code></pre>
</div>

<ul>
  <li>删除目录</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>dir.create('temp')
dir.create('temp1/temp1', recursive = TRUE)
dir()

# 删除temp目录
unlink("temp", recursive = TRUE) # unlink也可用来删除文件，此时不需要设置参数recursive
dir()

unlink("temp1", recursive = TRUE) # 
dir()
</code></pre>
</div>

<ul>
  <li>目录的权限</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code># 查看目录完整信息
file.info(".")

# 检查目录的权限
df&lt;-dir(full.names = TRUE)

# 检查文件或目录是否存在，mode=0
file.access(df, 0) == 0

# 检查文件或目录是否可执行，mode=1，目录为可以执行
file.access(df, 1) == 0

# 检查文件或目录是否可写，mode=2
file.access(df, 2) == 0

# 检查文件或目录是否可读，mode=4
file.access(df, 4) == 0

# 修改目录权限，所有用户只读
Sys.chmod("./test", mode = "0555", use_umask = TRUE)
file.info("./test")
</code></pre>
</div>

<h2 id="section-2">其他功能函数</h2>

<ul>
  <li>拼接目录字符串</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>file.path("p1","p2","p3")
</code></pre>
</div>

<ul>
  <li>所在目录</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>dirname("/home/conan/R/fs/readme.txt")
</code></pre>
</div>

<ul>
  <li>最底层子目录或文件名</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>basename("/home/conan/R/fs/readme.txt")
basename("/home/conan/R/fs")
</code></pre>
</div>

<ul>
  <li>win下标准路径转化</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>normalizePath(c(R.home(), tempdir()))
</code></pre>
</div>

<ul>
  <li>短路径，缩减路径的显示长度，只在win中运行</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>shortPathName(c(R.home(), tempdir()))
</code></pre>
</div>

<h2 id="section-3">几个特殊的目录</h2>

<p><strong>R.home()</strong> 查看R软件的相关目录</p>

<p><strong>.Library</strong> 查看R核心包的目录</p>

<p>**.libPaths() ** 查看R所有包的存放目录</p>

<p><strong>ystem.file()</strong> 查看指定包所在的目录</p>

<ul>
  <li>R软件的相关目录</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code># R.home() 查看R软件的相关目录

## 打印R软件安装目录
R.home()

## 打印R软件bin的目录
R.home(component="bin")

## 打印R软件文件的目录
R.home(component="doc")
</code></pre>
</div>

<ul>
  <li>R软件的包目录</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code># 打印核心包的目录
.Library
# 打印所有包的存放目录
.libPaths()
</code></pre>
</div>

<ul>
  <li>查看指定包所在的目录</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code># base包的存放目录
system.file()
# dplyr包的存放目录
system.file(package = "dplyr")
</code></pre>
</div>

<h2 id="section-4">小结</h2>
<p>正如张丹所说，用R语言操作文件系统还是很方便的，但其对于函数命名不太规范,比如文件和目录的操作函数名有时区分，有时又不区分。最后，对文件和目录的操作进行简单的小结以方便自己的记忆。</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">操作名称</th>
      <th style="text-align: center">文件操作</th>
      <th style="text-align: right">目录操作</th>
      <th> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">创建</td>
      <td style="text-align: center">file.create()</td>
      <td style="text-align: right">dir.create()</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">查看</td>
      <td style="text-align: center">list.files()</td>
      <td style="text-align: right">list.dirs()</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">读取</td>
      <td style="text-align: center">readLines()</td>
      <td style="text-align: right">-</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">重命名</td>
      <td style="text-align: center">file.rename()</td>
      <td style="text-align: right">file.rename()</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">复制</td>
      <td style="text-align: center">file.copy()</td>
      <td style="text-align: right">-</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">追加</td>
      <td style="text-align: center">file.append()</td>
      <td style="text-align: right">-</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">删除</td>
      <td style="text-align: center">file.remove()</td>
      <td style="text-align: right">unlink()</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">权限查看</td>
      <td style="text-align: center">file.info()</td>
      <td style="text-align: right">file.info()</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">权限查看</td>
      <td style="text-align: center">file.access()</td>
      <td style="text-align: right">file.access()</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">权限修改</td>
      <td style="text-align: center">Sys.chomod()</td>
      <td style="text-align: right">Sys.chomod()</td>
      <td> </td>
    </tr>
  </tbody>
</table>

</section>
<section class="meta">



<span>
	<a  href="http://xukuang.github.io/blog/2016/02/char-in-R/" class="pageNav"  >Previous</a>
	&nbsp;&nbsp;&nbsp;
	<a  href="http://xukuang.github.io/blog/2016/04/moment-in_statistics/" class="pageNav"  >Next</a>
</span>


<span class="author">
  <a href="http://xukuang.github.io/blog">Xu Kuang</a>
</span>
<span class="time">
  /
  <time datetime="2016-03-01">2016-03-01</time>
</span>
<br />
<span class="license">
  Published under <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">(CC) BY-NC-SA</a>
</span>

<span class="categories">
  in categories
  
  <a href="http://xukuang.github.io/blog/categories/#技术篇" title="技术篇">技术篇</a>&nbsp;
  
</span>


<span class="tags">
  tagged with 
  
  <a href="http://xukuang.github.io/blog/tags/#R" title="R">R</a>&nbsp;
  
  <a href="http://xukuang.github.io/blog/tags/#文件系统管理" title="文件系统管理">文件系统管理</a>&nbsp;
  
</span>

</section>
<div id="disqus_thread"></div>
<script>
/**
* RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
* LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//httpxukuanggithubio.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

<script type="text/javascript">
$(function(){
  $(document).keydown(function(e) {
    if (e.target.nodeName.toUpperCase() != 'BODY') return;
    var url = false;
        if (e.which == 37 || e.which == 74) {  // Left arrow and J
            
        url = 'http://xukuang.github.io/blog/2016/02/char-in-R/';
        
        }
        else if (e.which == 39 || e.which == 75) {  // Right arrow and K
            
        url = 'http://xukuang.github.io/blog/2016/04/moment-in_statistics/';
        
        }
        if (url) {
            window.location = url;
        }
  });
})
</script>


         </article>
       </div>
	   
	   
	   <footer>
           <p><small>Powered by <a href="https://github.com/mojombo/jekyll">Jekyll</a> & <a href="http://pages.github.com">GitHub</a>| Copyright  2016 by <a href="http://xukuang.github.io/blog/about/">Xu Kuang</a> | <span class="label label-info" id="timeSpan"></span></small></p>
       </footer>
	   
	   
	   </div>
       
	   <script type="text/javascript">
         var _gaq = _gaq || [];
         _gaq.push(['_setAccount', '']);
         _gaq.push(['_trackPageview']);
         (function() {
           var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
           ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
           var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
          })();
        </script>
		
		<!-- Baidu share -->
	<script type="text/javascript">
	window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"1","bdSize":"32"},"slide":{"type":"slide","bdImg":"0","bdPos":"right","bdTop":"100"}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
	</script>

    <!-- Baidu Button BEGIN -->
	<script>
	var _hmt = _hmt || [];
	(function() {
	  var hm = document.createElement("script");
	  hm.src = "//hm.baidu.com/hm.js?310f86f887042ea3a15786be6e96eb30";
	  var s = document.getElementsByTagName("script")[0]; 
	  s.parentNode.insertBefore(hm, s);
	})();
	</script>
	<!-- Baidu Button END -->
	
    </body>
  </html>
                                                    